CREATE PROCEDURE [dbo].[PRMOBILEUSERSIGNUP]
(
	@USERNAME	VARCHAR(500),
	@PASSWORD	VARCHAR(500)
)
AS
BEGIN

	IF EXISTS (
		SELECT '1'
		FROM	TBLMOBILEUSERSIGNUP (NOLOCK)
		WHERE	FLDUSERNAME = @USERNAME
	)
	BEGIN
		RAISERROR('USERNAME ALREADY EXISTS!', 16, 1)
		RETURN
	END

	INSERT INTO TBLMOBILEUSERSIGNUP
	(
		FLDUSERNAME		
		,FLDPASSWORD		
		,FLDCREATEDDATE	
		,FLDCREATEDBY	
		,FLDMODIFIEDDATE	
		,FLDMODIFIEDBY	
	)	
	VALUES
	(
		@USERNAME
		, @PASSWORD
		, GETUTCDATE()
		, 1
		, GETUTCDATE()
		, 1
	)

	SELECT FLDUSERID 
			, FLDDTKEY
	FROM TBLMOBILEUSERSIGNUP
	WHERE FLDUSERNAME = @USERNAME

END
GO